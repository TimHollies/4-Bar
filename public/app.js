webpackJsonp([0,2],[
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	
	__webpack_require__.e/*nsure*/(1, function() {
	
	    var
	        Ractive = __webpack_require__(2).Ractive,
	        toastr = __webpack_require__(2).toastr,
	        routingConfig = __webpack_require__(1),
	        page = __webpack_require__(2).page,
	        $ = __webpack_require__(2).jquery,
	        _ = __webpack_require__(2).lodash;
	
	    $(document).ready(function() {
	        //audio = require("./engine/audio/audio");
	
	        function route(currentRoute, context) {
	
	            if (routingConfig[currentRoute] !== undefined) {
	                var currentRouteConfig = routingConfig[currentRoute];
	
	                var dummyData = {};
	                var partials = [];
	                var partialviews = {};
	
	                if (currentRouteConfig.partials !== undefined) {
	                    partials = currentRouteConfig.partials;
	                    partialviews = partials.reduce(function(a, b) {
	                        a[b.name] = b.view;
	                        return a;
	                    }, {});
	                }
	
	                var ractive = new Ractive({
	                    el: "#stage",
	                    template: currentRouteConfig.template,
	                    data: dummyData,
	                    lazy: false,
	                    partials: partialviews
	                });
	
	                currentRouteConfig.model(ractive, dummyData, page, context);
	
	                _(partials).each(function(partial) {
	                    partial.model(ractive);
	                });
	
	            } else {
	                toastr.error("No route found in lookup");
	            }
	        }
	
	        //forcs the request to go to the server rather than the client
	        page.serverMap = function(url) {
	            page(url, function(context) {
	                window.location = url;
	            });
	        }
	
	        page('', function(context) {
	            route("", context);
	        });
	
	        page('/editor', function(context) {
	            route("editor", context);
	        });
	
	        page('/user', function(context) {
	            route("user", context);
	        });
	
	        page('/viewer', function(context) {
	            route("viewer", context);
	        });
	
	        page('/viewer/:tuneid', function(context) {
	            route("viewer", context);
	        });
	
	        page('/tutorial', function(context) {
	            route("tutorial", context);
	        });
	
	        page('editor/:tuneid', function(context) {
	            route("editor", context);
	        });
	
	        page.serverMap("/auth/google");
	        page.serverMap("/logout");
	
	        page('*', function(context) {
	            toastr.error("No route found");
	        });
	
	        //route();
	
	        //window.onhashchange = route;
	
	        page.start();
	
	        toastr.options.positionClass = "toast-bottom-right";
	
	    });
	
	});

/***/ }
]);
//# sourceMappingURL=data:application/json;base64,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QUFDLENBQUMsQ0FBQyxvQkFBb0I7a0JBQ2hDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztTQUM1QixDQUFDLENBQUM7O2FBRUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQzFCLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOzthQUVyQixDQUFDLENBQUMsQ0FBQyxDQUFDLG9CQUFvQjttQkFDbEIsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2xDLENBQUMsQ0FBQzs7U0FFRixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7U0FFVCxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7YUFFekIsTUFBTSxDQUFDLENBQUM7O2VBRU4sUUFBUSxlQUFlLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztLQUV2RCxDQUFDLENBQUM7O0FBRU4sRUFBQyxDQUFDLEMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG5yZXF1aXJlLmVuc3VyZSgndmVuZG9yJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyXHJcbiAgICAgICAgUmFjdGl2ZSA9IHJlcXVpcmUoJ3ZlbmRvcicpLlJhY3RpdmUsXHJcbiAgICAgICAgdG9hc3RyID0gcmVxdWlyZSgndmVuZG9yJykudG9hc3RyLFxyXG4gICAgICAgIHJvdXRpbmdDb25maWcgPSByZXF1aXJlKFwiLi4vcm91dGVzL2NvbmZpZy5yb3V0ZVwiKSxcclxuICAgICAgICBwYWdlID0gcmVxdWlyZSgndmVuZG9yJykucGFnZSxcclxuICAgICAgICAkID0gcmVxdWlyZSgndmVuZG9yJykuanF1ZXJ5LFxyXG4gICAgICAgIF8gPSByZXF1aXJlKCd2ZW5kb3InKS5sb2Rhc2g7XHJcblxyXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy9hdWRpbyA9IHJlcXVpcmUoXCIuL2VuZ2luZS9hdWRpby9hdWRpb1wiKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcm91dGUoY3VycmVudFJvdXRlLCBjb250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICBpZiAocm91dGluZ0NvbmZpZ1tjdXJyZW50Um91dGVdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Um91dGVDb25maWcgPSByb3V0aW5nQ29uZmlnW2N1cnJlbnRSb3V0ZV07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGR1bW15RGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnRpYWxzID0gW107XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydGlhbHZpZXdzID0ge307XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRSb3V0ZUNvbmZpZy5wYXJ0aWFscyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydGlhbHMgPSBjdXJyZW50Um91dGVDb25maWcucGFydGlhbHM7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydGlhbHZpZXdzID0gcGFydGlhbHMucmVkdWNlKGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYVtiLm5hbWVdID0gYi52aWV3O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYTtcclxuICAgICAgICAgICAgICAgICAgICB9LCB7fSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJhY3RpdmUgPSBuZXcgUmFjdGl2ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZWw6IFwiI3N0YWdlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IGN1cnJlbnRSb3V0ZUNvbmZpZy50ZW1wbGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBkdW1teURhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgbGF6eTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFydGlhbHM6IHBhcnRpYWx2aWV3c1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY3VycmVudFJvdXRlQ29uZmlnLm1vZGVsKHJhY3RpdmUsIGR1bW15RGF0YSwgcGFnZSwgY29udGV4dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgXyhwYXJ0aWFscykuZWFjaChmdW5jdGlvbihwYXJ0aWFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydGlhbC5tb2RlbChyYWN0aXZlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcihcIk5vIHJvdXRlIGZvdW5kIGluIGxvb2t1cFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9mb3JjcyB0aGUgcmVxdWVzdCB0byBnbyB0byB0aGUgc2VydmVyIHJhdGhlciB0aGFuIHRoZSBjbGllbnRcclxuICAgICAgICBwYWdlLnNlcnZlck1hcCA9IGZ1bmN0aW9uKHVybCkge1xyXG4gICAgICAgICAgICBwYWdlKHVybCwgZnVuY3Rpb24oY29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gdXJsO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHBhZ2UoJycsIGZ1bmN0aW9uKGNvbnRleHQpIHtcclxuICAgICAgICAgICAgcm91dGUoXCJcIiwgY29udGV4dCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHBhZ2UoJy9lZGl0b3InLCBmdW5jdGlvbihjb250ZXh0KSB7XHJcbiAgICAgICAgICAgIHJvdXRlKFwiZWRpdG9yXCIsIGNvbnRleHQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBwYWdlKCcvdXNlcicsIGZ1bmN0aW9uKGNvbnRleHQpIHtcclxuICAgICAgICAgICAgcm91dGUoXCJ1c2VyXCIsIGNvbnRleHQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBwYWdlKCcvdmlld2VyJywgZnVuY3Rpb24oY29udGV4dCkge1xyXG4gICAgICAgICAgICByb3V0ZShcInZpZXdlclwiLCBjb250ZXh0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcGFnZSgnL3ZpZXdlci86dHVuZWlkJywgZnVuY3Rpb24oY29udGV4dCkge1xyXG4gICAgICAgICAgICByb3V0ZShcInZpZXdlclwiLCBjb250ZXh0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcGFnZSgnL3R1dG9yaWFsJywgZnVuY3Rpb24oY29udGV4dCkge1xyXG4gICAgICAgICAgICByb3V0ZShcInR1dG9yaWFsXCIsIGNvbnRleHQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBwYWdlKCdlZGl0b3IvOnR1bmVpZCcsIGZ1bmN0aW9uKGNvbnRleHQpIHtcclxuICAgICAgICAgICAgcm91dGUoXCJlZGl0b3JcIiwgY29udGV4dCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHBhZ2Uuc2VydmVyTWFwKFwiL2F1dGgvZ29vZ2xlXCIpO1xyXG4gICAgICAgIHBhZ2Uuc2VydmVyTWFwKFwiL2xvZ291dFwiKTtcclxuXHJcbiAgICAgICAgcGFnZSgnKicsIGZ1bmN0aW9uKGNvbnRleHQpIHtcclxuICAgICAgICAgICAgdG9hc3RyLmVycm9yKFwiTm8gcm91dGUgZm91bmRcIik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vcm91dGUoKTtcclxuXHJcbiAgICAgICAgLy93aW5kb3cub25oYXNoY2hhbmdlID0gcm91dGU7XHJcblxyXG4gICAgICAgIHBhZ2Uuc3RhcnQoKTtcclxuXHJcbiAgICAgICAgdG9hc3RyLm9wdGlvbnMucG9zaXRpb25DbGFzcyA9IFwidG9hc3QtYm90dG9tLXJpZ2h0XCI7XHJcblxyXG4gICAgfSk7XHJcblxyXG59KTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2FwcC9hcHAuanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiJhcHAuanMifQ==