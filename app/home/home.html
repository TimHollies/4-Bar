<section class="page-view" id="view-home" on-click="page-clicked">
    <div class="header row coloured" intro='fade'>
        <div class="central-menu">
            <div class="app-name">
                <img src="/images/logo.png" class="app-logo" height="32px">
            </div>
        </div>
        {{>userbox}}
    </div>
    <div class="row">
        <div class="column quarter right-divide" intro='fade:{ delay: 100 }'>            
            <div class="tile-button-container">
                <h3>Welcome to 4|Bar</h3>
                <p>Choose a tune from the right or one of the options below!</p>
                <div class="tile-button" on-click="new_tune">
                    <h4>+ New Tune</h4>
                </div> 
                <div class="tile-button" on-click="view_tutorial">
                    <h4><i class="fa fa-book"></i>  Tutorial</h4>
                </div> 
            </div>
            <div class="text-area-padding">
                <h3>My Tunes</h3>
                {{#if !loggedIn}}
                    <p>Login to use these features!</p>                   
                {{else}}
                    {{#each myTunebookNames}}
                         <div on-click="view_tunebook" tunebookId="{{_id}}" class="tile-button">
                            <h4>{{name}}</h4>
                        </div> 
                    {{/each}}
                    <div class="tile-button" on-click="view_new_tunebook">
                        <h4><i class="fa fa-plus"></i>  New Tunebook</h4>
                    </div> 
                {{/if}}
            </div>
        </div>
        <div class="column three-quarters" intro='fade:{ delay: 200 }' id='task-pane'>
            <div class="text-area-padding scroll-list">
                <h3>Public Tunes</h3>
                <div id="search-box">
                    <i class="fa fa-search"></i>
                    <input on-keyup="updated_search" type="text" value="{{search_filter}}" />                               
                </div>
                <div class="search-options-bar">

                    <div class="search-option">
                        <label>Key</label>
                        <div class="key-selector">
                            <div on-click="key-selector-value-clicked" class="key-selector-value">All</div>
                            {{#if showingKeySelectorPopup}}
                            <div class="key-selector-popup" on-click="key-popup-clicked">
                                <div class="key-selector-popup-top">
                                    <div class="key-selector-popup-top-left">
                                        <table class="key-letter-selection-table">
                                            <tr>
                                                <td on-click="toggle-note" note="A" class="{{#if keynote['A']}}on{{/if}}">A</td>
                                                <td on-click="toggle-note" note="A#" class="{{#if keynote['A#']}}on{{/if}}">A#</td>
                                                <td on-click="toggle-note" note="B" class="{{#if keynote['B']}}on{{/if}}">B</td>
                                                <td on-click="toggle-note" note="C" class="{{#if keynote['C']}}on{{/if}}">C</td>
                                                <td on-click="toggle-note" note="C#" class="{{#if keynote['C#']}}on{{/if}}">C#</td>
                                                <td on-click="toggle-note" note="D" class="{{#if keynote['D']}}on{{/if}}">D</td>
                                            </tr>
                                            <tr>
                                                <td on-click="toggle-note" note="D#" class="{{#if keynote['D#']}}on{{/if}}" >D#</td>
                                                <td on-click="toggle-note" note="E" class="{{#if keynote['E']}}on{{/if}}" >E</td>
                                                <td on-click="toggle-note" note="F" class="{{#if keynote['F']}}on{{/if}}" >F</td>
                                                <td on-click="toggle-note" note="F#" class="{{#if keynote['F#']}}on{{/if}}" >F#</td>
                                                <td on-click="toggle-note" note="G" class="{{#if keynote['G']}}on{{/if}}" >G</td>
                                                <td on-click="toggle-note" note="G#" class="{{#if keynote['G#']}}on{{/if}}" >G#</td>
                                            </tr>
                                        </table>
                                        <div class="span-button-container"><span on-click="clear-all-keys">Clear All</span><span on-click="select-all-keys">Select All</span></div>
                                    </div>
                                    <div class="key-selector-popup-top-right">
                                        <p>Include equivilent keys</p>
                                        <input type="checkbox" value="Bike">
                                    </div>
                                </div>
                                <table class="key-mode-selection-table">
                                    <tr>
                                        <td on-click="toggle-mode" mode="Major" class="{{#if keymode['Major']}}on{{/if}}">Major</td>
                                        <td on-click="toggle-mode" mode="Dorian" class="{{#if keymode['Dorian']}}on{{/if}}">Dorian</td>
                                        <td on-click="toggle-mode" mode="Phrygian" class="{{#if keymode['Phrygian']}}on{{/if}}">Phrygian</td>
                                        <td on-click="toggle-mode" mode="Lydian" class="{{#if keymode['Lydian']}}on{{/if}}">Lydian</td>
                                    </tr>
                                    <tr>
                                        <td on-click="toggle-mode" mode="Mixolydian" class="{{#if keymode['Mixolydian']}}on{{/if}}">Mixolydian</td>
                                        <td on-click="toggle-mode" mode="Minor" class="{{#if keymode['Minor']}}on{{/if}}">Minor</td>
                                        <td on-click="toggle-mode" mode="Locrian" class="{{#if keymode['Locrian']}}on{{/if}}">Locrian</td>
                                    </tr>
                                </table>
                                <div class="span-button-container"><span on-click="clear-all-modes">Clear All</span><span on-click="select-all-modes">Select All</span></div>
                            </div>
                            {{/if}}

                        </div>                        
                    </div>

                    <div class="search-option">
                        <label>Rhythm</label>
                        <select>
                            <option>All</option>
                            {{#each rhythm}}
                                <option>{{.}}</option>
                            {{/each}}
                        </select>
                    </div>

                    <div class="search-option">
                        <label>Type</label>
                        <select>
                            <option>All</option>
                        </select>
                    </div>

                    <div class="search-option">
                        <label>Time Signature</label>
                        <select>
                            <option>All</option>
                        </select>
                    </div>
                        
                </div> 
                <ul class="item-list">
                    {{#each publicTuneNames}}
                        <li on-click="view_tune" tune-id="{{_id}}">{{name}}<br><small>{{metadata.createdOn}} - {{settings.type}} - {{settings.key}}</small></li>
                    {{/each}}
                </ul>
            </div>
            
        </div>
    </div>
</section>